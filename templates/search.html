{% extends "base.html" %}
{% block content %}
<h2 class="mb-4">Search Prescriptions</h2>

<form method="POST" class="card p-4 shadow-sm mb-4">
    <div class="mb-3">
        <label class="form-label">Age</label>
        <input type="number" name="age" class="form-control" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Weight (kg)</label>
        <input type="number" step="0.1" name="weight" class="form-control" required>
    </div>
    <div class="mb-3">
        <label class="form-label">Symptoms (comma separated)</label>
        <input type="text" name="symptoms" class="form-control" placeholder="fever, cough" required>
    </div>
    <button type="submit" class="btn btn-success">Search</button>
</form>

{% if results %}
<h3>Matching Prescriptions</h3>
<ul class="list-group mb-4">
    {% for r in results %}
    <li class="list-group-item">
        <strong>{{ r.medicine }}</strong> - {{ r.dosage }}
        <br>
        <small>For ages {{ r.age_min }}–{{ r.age_max }}, weight {{ r.weight_min }}–{{ r.weight_max }} kg</small>
        <br>
        <small>Symptoms: {{ ", ".join(r.symptoms) }}</small>
    </li>
    {% endfor %}
</ul>
{% elif request.method == 'POST' %}
<div class="alert alert-warning">No matching prescription found.</div>
{% endif %}
{% endblock %}